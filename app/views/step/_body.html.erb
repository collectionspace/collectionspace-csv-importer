<% if !step.new_record? || !batch.ready? %>
  <div class="columns">
    <div class="column">
      <%= render partial: 'step/status', locals: { step: step } %>
    </div>
  </div>
  <% if step.done? || batch.ran? %>
    <div class="columns">
      <div class="column">
        <article class="message is-small">
          <div class="message-header has-background-white-ter has-text-dark">
            <p><%= fa_icon 'file', class: 'mr-2' %>Files</p>
          </div>
          <div class="message-body has-background-white-bis">
            <table class="table is-fullwidth is-bordered">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Size</th>
                  <th>Download</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>report.csv</td>
                  <td>12kb</td>
                  <td><%= fa_icon('download') %></td>
                </tr>
                <tr>
                  <td>report.json</td>
                  <td>12kb</td>
                  <td><%= fa_icon('download') %></td>
                </tr>
              </tbody>
            </table>
          </div>
        </article>
      </div>
      <div class="column">
        <article class="message is-small">
          <div class="message-header has-background-white-ter has-text-dark">
            <p><%= fa_icon 'inbox', class: 'mr-2' %>Messages</p>
          </div>
          <div class="message-body has-background-white-bis">
            <p>Nothing to report!</p>
          </div>
        </article>
      </div>
    </div>
  <% end %>
<% else %>
  <%= yield :step_ready %>
<% end %>
